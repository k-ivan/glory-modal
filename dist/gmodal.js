/*! Glory-modal plugin v2.1.0-beta.1 | MIT License | https://github.com/k-ivan/glory-modal */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Gmodal",[],e):"object"==typeof exports?exports.Gmodal=e():t.Gmodal=e()}(window,(function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){i(1),t.exports=i(2)},function(t,e,i){},function(t,e,i){"use strict";function n(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function o(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(Object(i),!0).forEach((function(e){r(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i.r(e);var s={checkScrollbar:function(){return window.innerWidth>document.documentElement.clientWidth},getScrollbarWidth:function(){var t=document.createElement("div");t.style.cssText="\n      width: 100px;\n      height: 100px;\n      overflow: scroll;\n      position: absolute;\n      top: -9999px;\n    ",document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e},isVisible:function(t){if("none"===t.style.display)return!1;var e=t.getBoundingClientRect();return e&&e.width>0&&e.height>0},emulateTransitionEnd:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:150,i=!1,n=this.transitionEnd();t.addEventListener(n,(function t(e){this.removeEventListener(e.type,t),i=!0}));var o=function(){if(!i){var e=document.createEvent("HTMLEvents");e.initEvent(n,!1,!1),t.dispatchEvent(e)}};setTimeout(o,e)},transitionEnd:function(){var t={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd"},e=document.documentElement;for(var i in t)if(void 0!==e.style[i])return t[i];return!1},getTransitionDurationFromElement:function(t){if(!t)return 0;var e=window.getComputedStyle(t)["transition-duration"],i=window.getComputedStyle(t)["transition-delay"],n=parseFloat(e),o=parseFloat(i);return n||o?(e=e.split(",")[0],i=i.split(",")[0],1e3*(parseFloat(e)+parseFloat(i))):0},customTrigger:function(t,e){var i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"CustomEvent"in window&&"function"==typeof window.CustomEvent?i=new CustomEvent(t,{detail:o({},n)}):(i=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,o({},n)),e.dispatchEvent(i)},onceTransitionEnd:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=function e(o){o.target===t&&(t.removeEventListener(o.type,e,n),i.call(this,o))};t.addEventListener(e,o,n)}};function a(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return l(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function c(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function d(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?c(Object(i),!0).forEach((function(e){f(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var m=".gmodal__container",_=".gmodal__dialog",b='[data-gmodal="dismiss"]',p="gmodal-open",y="is-shown",v="is-hidden",g="has-animate",k="gmodal-backdrop",E={stickySelectors:[],animation:!0,backdrop:!0,closeBackdrop:!0,keyboard:!0},O=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'].join(","),j=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u(this,t),!!e&&(this._modal="string"==typeof e?document.querySelector(e):e,this._modal instanceof Element&&(this._modal.instance?this._modal.instance:(this._modal.instance=this,this._modal.tabIndex="-1",this._isOpen=!1,this._isTransitiong=!1,this._settings=d(d({},E),i),this._transitionEndEvent=s.transitionEnd(),void this._init())))}var e,i,n;return e=t,n=[{key:"closeAll",value:function(){if(this.modals.length){var t=!1,e=this.modals[0].instances._hasScrollbar;this.modals.slice().reverse().forEach((function(i,n){0===n?i.instances._hasScrollbar=e:t=!0,i.instances.close(t)}))}}}],(i=[{key:"_init",value:function(){this._body=document.body,this._modalContainer=this._modal.querySelector(m),this._modalDialog=this._modal.querySelector(_),this._modalDismiss=Array.prototype.slice.call(this._modal.querySelectorAll(b)),this._scrollbarWidth=0,this._settings.animation&&this._modal.classList.add(g),this._observerCallback=this._observerCallback.bind(this),this._observer=new MutationObserver(this._observerCallback),this._observer.observe(this._modalDialog,{childList:!0,subtree:!0,attributes:!0}),this._attachEvents()}},{key:"_observerCallback",value:function(t){var e=t[0];(e.addedNodes.length||e.removedNodes.length||"attributes"===e.type)&&this._focusable()}},{key:"_stickySelectorsArray",value:function(){return Array.isArray(this._settings.stickySelectors)?this._settings.stickySelectors.reduce((function(t,e){var i=Array.prototype.slice.call(document.querySelectorAll(e));return t.push.apply(t,a(i)),t}),[]):[]}},{key:"_attachEvents",value:function(){var t=this;this._closeHandler=function(e){e.preventDefault(),e.stopPropagation(),t.close()},this._clickModal=function(e){t._modalDialog.contains(e.target)||t.close()},this._modalDismiss.forEach((function(e){e.addEventListener("click",t._closeHandler)})),this._settings.closeBackdrop&&this._modal.addEventListener("click",this._clickModal),this._settings.keyboard&&(this._keyHandler=this._keyHandler.bind(this),this._modal.addEventListener("keydown",this._keyHandler))}},{key:"_dettachEvents",value:function(){var t=this;this._settings.closeBackdrop&&this._modal.removeEventListener("click",this._clickModal),this._modalDismiss.forEach((function(e){e.removeEventListener("click",t._closeHandler)})),this._settings.keyboard&&this._modal.removeEventListener("keydown",this._keyHandler)}},{key:"_focusable",value:function(){this._focusableEls=Array.prototype.slice.call(this._modal.querySelectorAll(O)).filter((function(t){return s.isVisible(t)})),this._focusableElFirst=this._focusableEls[0],this._focusableElLast=this._focusableEls[this._focusableEls.length-1]}},{key:"_keyHandler",value:function(t){var e=this;switch(t.which){case 9:if(0===this._focusableEls.length){t.preventDefault();break}t.shiftKey?document.activeElement!==e._focusableElFirst&&document.activeElement!==e._modal||(t.preventDefault(),e._focusableElLast.focus()):document.activeElement===e._focusableElLast&&(t.preventDefault(),e._focusableElFirst.focus());break;case 27:t.stopPropagation(),this.close()}}},{key:"_createBackdrop",value:function(){var t=document.createElement("div");return t.className=k,this._settings.animation&&(t.className+=" ".concat(g)),document.body.appendChild(t),t}},{key:"_setScrollOffset",value:function(){var t=this;if(this._hasScrollbar){this._scrollbarWidth=s.getScrollbarWidth();var e=this._body.style.paddingRight,i=parseFloat(getComputedStyle(this._body).paddingRight);e&&this._body.setAttribute("data-gmodal-padding",e),this._body.style.paddingRight="".concat(i+this._scrollbarWidth,"px"),this._stickySelectorsArray().forEach((function(e){var i=e.style.marginRight,n=parseFloat(getComputedStyle(e).marginRight);i&&e.setAttribute("data-gmodal-margin",i),e.style.marginRight="".concat(n+t._scrollbarWidth,"px")}))}}},{key:"_resetScrollOffset",value:function(){this._hasScrollbar&&(this._body.style.paddingRight=this._body.getAttribute("data-gmodal-padding")||"",this._body.removeAttribute("data-gmodal-padding"),this._stickySelectorsArray().forEach((function(t){t.style.marginRight=t.getAttribute("data-gmodal-margin")||"",t.removeAttribute("data-gmodal-margin")})))}},{key:"_adjustModal",value:function(){this._scrollbarWidth=s.getScrollbarWidth(),this._modal.style.overflow="hidden",this._modal.style.marginRight="".concat(this._scrollbarWidth,"px")}},{key:"_resetAdjustModal",value:function(){this._modal.style.overflow="",this._modal.style.marginRight=""}},{key:"_hideBackdrop",value:function(){var t=this;if(this._backdrop)if(this._backdrop.classList.remove(y),this._settings.animation){var e=s.getTransitionDurationFromElement(this._backdrop);s.onceTransitionEnd(this._backdrop,this._transitionEndEvent,(function(){t._backdrop.parentNode&&t._backdrop.parentNode.removeChild(t._backdrop)})),s.emulateTransitionEnd(this._backdrop,e)}else this._backdrop.parentNode&&this._backdrop.parentNode.removeChild(this._backdrop)}},{key:"_hideModal",value:function(){if(1===this.modalsLength&&(this._body.classList.remove(p),this._resetScrollOffset()),this._modal.style.display="",this._isTransitiong=!1,this.modalsLength){var e=t.modals[this.modalsLength-1].focuses;setTimeout((function(){null==e||e.focus()}),0)}t.modals.pop(),this.modalsLength&&t.modals[this.modalsLength-1].instances.element.classList.remove(v),s.customTrigger("gmodal:close",this._modal)}},{key:"open",value:function(){var e=this;if(this._modal&&!this._isOpen&&!this._isTransitiong){this._isOpen=!0,this._focusableSave=document.activeElement,this.modalsLength||(this._hasScrollbar=s.checkScrollbar(),this._body.classList.add(p),this._setScrollOffset(),this._settings.backdrop&&(this._backdrop=this._createBackdrop(this))),s.customTrigger("gmodal:beforeopen",this._modal),this._modal.style.display="block",this._isTransitiong=!0,this._modal.scrollTop=0,this.modalsLength&&t.modals.forEach((function(t){t.instances.element.classList.add(v)})),t.modals.push({focuses:this._focusableSave,instances:this._modal.instance}),setTimeout((function(){e._backdrop&&e._backdrop.classList.add(y),e._modal.classList.add(y)}),20);var i=function(){e._isTransitiong=!1,e._focusable(),e._modal.focus(),s.customTrigger("gmodal:open",e._modal)};if(this._settings.animation){this._adjustModal();var n=s.getTransitionDurationFromElement(this._modalContainer);s.onceTransitionEnd(this._modalContainer,this._transitionEndEvent,(function(){e._resetAdjustModal(),i()})),s.emulateTransitionEnd(this._modalContainer,n)}else i()}}},{key:"close",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._modal&&this._isOpen&&!this._isTransitiong)if(s.customTrigger("gmodal:beforeclose",this._modal),this._modal.classList.remove(y),this._hideBackdrop(),this._isOpen=!1,this._isTransitiong=!0,this._settings.animation&&!t){var e=s.getTransitionDurationFromElement(this._modalContainer);s.onceTransitionEnd(this._modalContainer,this._transitionEndEvent,this._hideModal.bind(this)),s.emulateTransitionEnd(this._modalContainer,e)}else this._hideModal()}},{key:"destroy",value:function(){var t=this;this._modal&&(this._observer&&this._observer.disconnect(),this._backdrop&&this._backdrop.parentNode&&this._backdrop.parentNode.removeChild(this._backdrop),this._hideModal(),this._modal.classList.remove(g,y),this._dettachEvents(),delete this._modal.instance,Object.keys(this).forEach((function(e){delete t[e]})))}},{key:"element",get:function(){return this._modal}},{key:"modalsLength",get:function(){return t.modals.length}}])&&h(e.prototype,i),n&&h(e,n),t}();f(j,"modals",[]);e.default=j}]).default}));