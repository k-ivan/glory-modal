/*! Modal-plugin v1.0.0 | MIT License | https://github.com/k-ivan/modal-plugin */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Modal",[],e):"object"==typeof exports?exports.Modal=e():t.Modal=e()}(window,function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){i(1),t.exports=i(2)},function(t,e,i){},function(t,e,i){"use strict";function n(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){o(t,e,i[e])})}return t}function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i.r(e);var a={emulateTransitionEnd:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:150,i=!1,n=this.transitionEnd();t.addEventListener(n,function t(e){this.removeEventListener(e.type,t),i=!0});setTimeout(function(){if(!i){var e=document.createEvent("HTMLEvents");e.initEvent(n,!1,!1),t.dispatchEvent(e)}},e)},transitionEnd:function(){var t={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd"},e=document.documentElement;for(var i in t)if(void 0!==e.style[i])return t[i];return!1},getTransitionDurationFromElement:function(t){if(!t)return 0;var e=window.getComputedStyle(t)["transition-duration"],i=window.getComputedStyle(t)["transition-delay"],n=parseFloat(e),o=parseFloat(i);return n||o?(e=e.split(",")[0],i=i.split(",")[0],1e3*(parseFloat(e)+parseFloat(i))):0},customTrigger:function(t,e){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"CustomEvent"in window&&"function"==typeof window.CustomEvent?i=new CustomEvent(t,{detail:n({},o)}):(i=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n({},o)),e.dispatchEvent(i)},onceTransitionEnd:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.addEventListener(e,function e(o){o.target===t&&(t.removeEventListener(o.type,e,n),i.call(this,o))},n)}};function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var l=".modal__dialog",d=".modal__content",c=".modal__body",h='[data-modal="dismiss"]',u="modal-open",m="is-show",f="has-animate",b="modal-backdrop",p={stickySelectors:[],animation:!0,backdrop:!0,closeBackdrop:!0,keyboard:!0},y=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!!e&&(this.modal="string"==typeof e?document.querySelector(e):e,this.modal instanceof Element&&(this.modal.instance?this.modal.instance:(this.modal.instance=this,this.modal.tabIndex="-1",this.isOpen=!1,this.isTransitiong=!1,this.settings=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){s(t,e,i[e])})}return t}({},p,i),this.transitionEndEvent=a.transitionEnd(),void this.init())))}var e,i,n;return e=t,(i=[{key:"init",value:function(){this.body=document.body,this.modalDialog=this.modal.querySelector(l),this.modalContent=this.modal.querySelector(d),this.modalBody=this.modal.querySelector(c),this.modalDismiss=Array.prototype.slice.call(this.modal.querySelectorAll(h)),this.scrollbarWidth=0,this.settings.animation&&this.modal.classList.add(f),this._focusable(),this._attachEvents()}},{key:"_attachEvents",value:function(){var t=this;this.closeHandler=function(e){e.preventDefault(),e.stopPropagation(),t.close()},this.clickModal=function(e){e.preventDefault(),t.modalContent.contains(e.target)||t.close()},this.modalDismiss.forEach(function(e){e.addEventListener("click",t.closeHandler)}),this.settings.closeBackdrop&&this.modal.addEventListener("click",this.clickModal),this.settings.keyboard&&(this.keyHandler=this._keyHandler.bind(this),this.modal.addEventListener("keydown",this.keyHandler))}},{key:"_dettachEvents",value:function(){var t=this;this.settings.closeBackdrop&&this.modal.removeEventListener("click",this.clickModal),this.modalDismiss.forEach(function(e){e.removeEventListener("click",t.closeHandler)}),this.settings.keyboard&&this.modal.removeEventListener("keydown",this.keyHandler)}},{key:"_focusable",value:function(){this.focusableEls=Array.prototype.slice.call(this.modal.querySelectorAll('a[href],\n        area[href],\n        input:not([disabled]):not([type="hidden"]):not([aria-hidden]),\n        select:not([disabled]):not([aria-hidden]),\n        textarea:not([disabled]):not([aria-hidden]),\n        button:not([disabled]):not([aria-hidden]),\n        iframe,\n        object,\n        embed,\n        [contenteditable],\n        [tabindex]:not([tabindex^="-"])')),this.focusableElFirst=this.focusableEls[0],this.focusableElLast=this.focusableEls[this.focusableEls.length-1]}},{key:"_keyHandler",value:function(t){var e=this;switch(t.which){case 9:if(0===this.focusableEls.length){t.preventDefault();break}t.shiftKey?(console.log(document.activeElement),document.activeElement!==e.focusableElFirst&&document.activeElement!==e.modal||(t.preventDefault(),e.focusableElLast.focus())):document.activeElement===e.focusableElLast&&(t.preventDefault(),e.focusableElFirst.focus());break;case 27:t.stopPropagation(),this.close()}}},{key:"_checkScrollbar",value:function(){return window.innerWidth>document.documentElement.clientWidth}},{key:"_getScrollbarWidth",value:function(){var t=document.createElement("div");t.style.cssText="\n      width: 100px;\n      height: 100px;\n      overflow: scroll;\n      position: absolute;\n      top: -9999px;\n    ",document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e}},{key:"_createBackdrop",value:function(){var t=document.createElement("div");return t.className=b,this.settings.animation&&(t.className+=" ".concat(f)),document.body.appendChild(t),t}},{key:"_setScrollOffset",value:function(){var t=this;if(this.hasScrollbar=this._checkScrollbar(),this.body.classList.add(u),this.hasScrollbar){this.scrollbarWidth=this._getScrollbarWidth();var e=this.body.style["margin-right"],i=parseFloat(getComputedStyle(this.body)["margin-right"]);this.body.setAttribute("data-modal-margin",e),this.body.style["margin-right"]="".concat(i+this.scrollbarWidth,"px"),this.settings.stickySelectors.forEach(function(e){t.stickySelectors=Array.prototype.slice.call(document.querySelectorAll(e)),t.stickySelectors.forEach(function(e){var i=e.style["margin-right"],n=parseFloat(getComputedStyle(e)["margin-right"]);e.setAttribute("data-modal-margin",i),e.style["margin-right"]="".concat(n+t.scrollbarWidth,"px")})})}}},{key:"_resetScrollOffset",value:function(){this.body.classList.remove(u),this.hasScrollbar&&(this.body.style["margin-right"]=this.body.getAttribute("data-modal-margin")||"",this.body.removeAttribute("data-modal-margin"),this.stickySelectors&&Array.isArray(this.stickySelectors)&&this.stickySelectors.forEach(function(t){t.style["margin-right"]=t.getAttribute("data-modal-margin")||"",t.removeAttribute("data-modal-margin")}))}},{key:"_adjustModal",value:function(){this.scrollbarWidth=this._getScrollbarWidth(),this.modal.style.overflow="hidden",this.modal.style.marginRight="".concat(this.scrollbarWidth,"px")}},{key:"_resetAdjustModal",value:function(){this.modal.style.overflow="",this.modal.style.marginRight=""}},{key:"open",value:function(){var t=this;if(this.modal&&!this.isOpen&&!this.isTransitiong)if(this.isOpen=!0,this.focusableSave=document.activeElement,this._setScrollOffset(),this.settings.backdrop&&(this.backdrop=this._createBackdrop(this)),this.modal.style.display="block",this.isTransitiong=!0,this.modal.scrollTop=0,setTimeout(function(){t.backdrop&&t.backdrop.classList.add(m),t.modal.classList.add(m)},20),this.settings.animation){this._adjustModal();var e=a.getTransitionDurationFromElement(this.modalDialog);a.onceTransitionEnd(this.modalDialog,this.transitionEndEvent,function(e){t.isTransitiong=!1,t._resetAdjustModal(),t.modal.focus(),a.customTrigger("showModal",t.modal)}),a.emulateTransitionEnd(this.modalDialog,e)}else this.isTransitiong=!1,this.modal.focus(),a.customTrigger("showModal",this.modal)}},{key:"close",value:function(){if(this.modal&&this.isOpen&&!this.isTransitiong)if(this.modal.classList.remove(m),this.hideBackdrop(),this.isOpen=!1,this.isTransitiong=!0,this.settings.animation){this._adjustModal();var t=a.getTransitionDurationFromElement(this.modalDialog);a.onceTransitionEnd(this.modalDialog,this.transitionEndEvent,this.hideModal.bind(this)),a.emulateTransitionEnd(this.modalDialog,t)}else this.hideModal()}},{key:"hideBackdrop",value:function(){var t=this;if(this.backdrop)if(this.backdrop.classList.remove(m),this.settings.animation){var e=a.getTransitionDurationFromElement(this.backdrop);a.onceTransitionEnd(this.backdrop,this.transitionEndEvent,function(e){t.backdrop.parentNode&&t.backdrop.parentNode.removeChild(t.backdrop)}),a.emulateTransitionEnd(this.backdrop,e)}else this.backdrop.parentNode&&this.backdrop.parentNode.removeChild(this.backdrop)}},{key:"hideModal",value:function(){this._resetScrollOffset(),this._resetAdjustModal(),this.modal.style.display="",this.isTransitiong=!1,this.focusableSave&&this.focusableSave.focus(),a.customTrigger("hideModal",this.modal)}},{key:"unobserve",value:function(){var t=this;this.modal&&(this.backdrop&&this.backdrop.parentNode&&this.backdrop.parentNode.removeChild(this.backdrop),this.hideModal(),this.modal.classList.remove(f,m),this._dettachEvents(),delete this.modal.instance,Object.keys(this).forEach(function(e){delete t[e]}))}},{key:"element",get:function(){return this.modal}}])&&r(e.prototype,i),n&&r(e,n),t}();e.default=y}]).default});